<mat-spinner *ngIf="loading"></mat-spinner>
<div class="container pt-4 pb-4" *ngIf="!loading">
  <div class="row">
    <div class="col-md-6 col-12">
      <div class="product-slider">
        <div class="row g-0">
          <div class="col-2">
            <div class="contain-slider">
              <img
                *ngFor="let img of productByColors.images; let i = index"
                id="{{ i + 1 }}"
                alt="{{ productInfo.name }}"
                src="{{ img }}"
                class="slider-img"
                (mouseover)="openImg(img); setImageActive(i)"
                [class.activeImg]="isImgActive(i)"
              />
            </div>
          </div>
          <div class="col-10">
            <img
              src="{{ productByColors.images[0] }}"
              alt="{{ productInfo.name }}"
              class="preview"
              #preview
            />
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-6 col-12">
      <div class="product-Details">
        <h1 class="product-name">{{ productInfo.name }}</h1>
        <h2 class="product-price">
          Price:{{ " " }}{{ productInfo.price }}{{ " " }}LE
        </h2>
        <!-- colors -->
        <div class="contain-colors">
          <button
            *ngFor="let product of productInfo.productInfoId"
            [ngClass]="{ 'new-color': product.colors === 'white' }"
            [style.background-color]="product.colors"
            type="button"
            id="{{ product._id }}"
            class="color-btn"
            [class.activeColors]="isActive(product.colors)"
            (click)="getColorItems(product._id); setActive(product.colors)"
          ></button>
        </div>
        <!-- sizes -->
        <div class="contain-sizes">
          <button
            type="button"
            class="btn sizes"
            [disabled]="productByColors.medium === 0"
            [value]="productByColors.medium"
            [class.activeSize]="isActiveSize('medium')"
            (click)="setActiveSize('medium')"
          >
            M
          </button>
          <button
            type="button"
            class="btn sizes"
            [disabled]="productByColors.large === 0"
            [value]="productByColors.large"
            [class.activeSize]="isActiveSize('large')"
            (click)="setActiveSize('large')"
          >
            L
          </button>
          <button
            type="button"
            class="btn sizes"
            [disabled]="productByColors.xlarge === 0"
            [value]="productByColors.xlarge"
            [class.activeSize]="isActiveSize('xlarge')"
            (click)="setActiveSize('xlarge')"
          >
            XL
          </button>
        </div>
        <!-- test simple order counter -->
        <div class="contain-order-counter">
          <h2 class="contain-counter">
            <button
              type="button"
              (click)="decreaseOrder()"
              class="dec-btn"
              [disabled]="orderCounter <= 1"
            >
              -
            </button>
            <span class="counter">{{ orderCounter }}</span>
            <button
              type="button"
              (click)="increaseOrder()"
              class="inc-btn"
              [disabled]="orderCounter >= 5"
            >
              +
            </button>
          </h2>
          <h1>
            <span class="total">Total price :{{ " " }}{{ totalPrice }}</span>
          </h1>
        </div>
        <button
          type="button"
          class="btn btn-primary mt-2"
          data-bs-toggle="modal"
          data-bs-target="#orderModel"
        >
          Add To Cart
        </button>
        <!-- Modal -->
        <div
          class="modal fade order-model"
          id="orderModel"
          tabindex="-1"
          aria-labelledby="orderModelLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h1 class="modal-title fs-5" id="orderModelLabel">
                  Confirm Order
                </h1>
                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="modal"
                  aria-label="Close"
                ></button>
              </div>
              <div class="modal-body">
                <!-- <form
                  (submit)="addOrder()"
                  name="orderForm"
                  #orderForm="ngForm"
                >
                  <div class="row">
                    <div class="col-12">
                      <div class="form-group">
                        <input
                          type="string"
                          name="city"
                          placeholder="city"
                          class="form-control"
                          name="city"
                          required
                        />
                      </div>
                    </div>
                    <div class="col-8">
                      <div class="form-group">
                        <input
                          type="string"
                          name="street"
                          placeholder="street"
                          class="form-control"
                          name="street"
                          required
                        />
                      </div>
                    </div>
                    <div class="col-4">
                      <div class="form-group">
                        <input
                          type="string"
                          name="buildingNumber"
                          placeholder="buildingNumber"
                          class="form-control"
                          name="buildingNumber"
                          required
                        />
                      </div>
                    </div>
                    <div class="col-3">
                      <div class="form-group">
                        <label for="floor">Floor</label
                        ><select name="floor" id="floor">
                          <option value="1">1</option>
                          <option value="2">2</option>
                          <option value="4">4</option>
                          <option value="5">5</option>
                          <option value="6">6</option>
                          <option value="7">7</option>
                          <option value="8">8</option>
                          <option value="9">9</option>
                          <option value="10">10</option>
                        </select>
                      </div>
                    </div>
                    <div class="col-3">
                      <div class="form-group">
                        <label for="apartment">apartment</label
                        ><select name="apartment" id="apartment">
                          <option value="1">1</option>
                          <option value="2">2</option>
                          <option value="4">4</option>
                          <option value="5">5</option>
                          <option value="6">6</option>
                        </select>
                      </div>
                    </div>
                    <div class="col-6">
                      <div class="form-group">
                        <textarea
                          name="notes"
                          id="notes"
                          cols="25"
                          rows="2"
                          placeholder="notes"
                        ></textarea>
                      </div>
                    </div>
                  </div>
                </form> -->
                <h1>Are You sure?</h1>
              </div>
              <div class="modal-footer">
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-bs-dismiss="modal"
                >
                  Close
                </button>
                <button
                  type="button"
                  class="btn btn-primary"
                  (click)="addToCart()"
                >
                  add order
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
